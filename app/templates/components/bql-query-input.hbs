{{!--
  Copyright 2016, Yahoo Inc.
  Licensed under the terms of the Apache License, Version 2.0.
  See the LICENSE file associated with the project for terms.
 --}}
<div class="query-panel {{if isListening "query-running"}}">

  <div class="validation-container">
    {{#if hasError}}
      {{#simple-alert type="error"}}
        <span>OOPS! PLEASE FIX ALL ERRORS TO PROCEED</span>
        <ul class="error-list">
          <li>{{bqlError}}</li>
        </ul>
      {{/simple-alert}}
    {{else if hasSaved}}
      {{#simple-alert type="success"}}
        <span>SAVED TO BROWSER CACHE!</span>
      {{/simple-alert}}
    {{/if}}
  </div>

  <div class="scrollable-panel">

    <div class="container-fluid name-container">
      <div class="col-xs-12 query-name">
        {{labeled-input fieldName="Name" placeholder="Name Your Query" fieldValue=query.name disabled=isListening maxlength=80}}
      </div>
    </div>

    <div class="container-fluid bql-container">
      <div class="section-header">
        <h3 class="section-title">BQL</h3>
        {{#info-popover title="BQL"}}
          {{partial "partials/filter-help"}}
        {{/info-popover}}
      </div>

      {{textarea value=query.bql placeholder="Example: SELECT * FROM STREAM(20000, TIME) LIMIT 1;" cols="150" rows="20"}}
    </div>  
  </div>

  <div class="container-fluid control-container">
    <hr />
    <button type="button" class="btn btn-primary btn-md submit-button" onclick={{action "listen"}}>Run Query</button>
    <button type="button" class="btn btn-default btn-md save-button" onclick={{action "save"}}>Save Query</button>
  </div>


</div>
